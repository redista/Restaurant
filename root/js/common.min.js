function UpdateCheckout(){$("#order-list").length>0&&$("#order-list").html("");let t=document.getElementById("order-list"),e=JSON.parse(localStorage.getItem("cart")),a=0;for(let l in e){let o=e[l].price*e[l].amount,n=document.createElement("li");n.classList.add("list-group-item","d-flex","justify-content-between"),console.log(l);let r=`<h6 class="checkout-item">${l} x ${e[l].amount}</h6>`,s=`<div class="checkout-btn-container">${`<input type="button" value="-" class="itembtn rmvbtn checkout-btn" id="${l}" onclick="RemoveFromCart(this.id)" />`}${`<input type="button" value="+" class="itembtn addbtn checkout-btn" id="${l}" onclick="AddToCart(this.id)" />`}</div>`;n.innerHTML=`<div>${r}${s}<span style="display:block;">&euro; ${o.toFixed(2)}</span></div>`,t.appendChild(n),a+=o}let l=document.createElement("li");l.classList.add("list-group-item","d-flex","justify-content-between"),l.innerHTML=`<div><h6>Total</h6><span>&euro; ${a.toFixed(2)}</span></div>`,t.appendChild(l)}function AddToCart(t){if(cart=JSON.parse(localStorage.getItem("cart")),null==cart[t]){let e={amount:1,price:menu_info[t].price};cart[t]=e}else cart[t].amount++;localStorage.setItem("cart",JSON.stringify(cart)),SetTotal(),$("body").is(".checkout-main")&&UpdateCheckout()}function RemoveFromCart(t){cart=JSON.parse(localStorage.getItem("cart")),null!=cart[t]?(cart[t].amount>1?cart[t].amount--:delete cart[t],localStorage.setItem("cart",JSON.stringify(cart)),SetTotal(),$("body").is(".checkout-main")&&UpdateCheckout()):console.log("no item exists in basket")}function SetTotal(){let t=JSON.parse(localStorage.getItem("cart")),e=0,a=0;for(let l in t)e+=t[l].price*t[l].amount,a+=t[l].amount;localStorage.setItem("items",a),localStorage.setItem("total",e),$("#checkout-footer").length>0&&($("#items-display").html(a),$("#price-display").html(`&euro; ${e.toFixed(2)}`))}$(document).ready(function(){var t=localStorage.getItem("loggedIn");if(null===localStorage.getItem("cart")?(localStorage.setItem("cart","{}"),localStorage.setItem("total",0),localStorage.setItem("items",0)):null===localStorage.getItem("total")?(localStorage.setItem("items",0),localStorage.setItem("total",0)):(JSON.parse(localStorage.getItem("cart")),SetTotal()),1==t?$("#loginlogout").html("Logout"):$("#loginlogout").html("Login"),$("#loginlogout").click(function(){1==t?(localStorage.setItem("loggedIn",0),window.location.replace("login.html")):window.location.replace("login.html")}),$("#items-display").html(`${parseInt(localStorage.getItem("items"))}`),$("#price-display").html(`&euro; ${parseInt(localStorage.getItem("total")).toFixed(2)}`),$("body").is(".userdetails")&&1!=t&&window.location.replace("login.html"),$("body").is(".checkout-main")&&UpdateCheckout(),$('form[name="login"]').submit(function(t){t.preventDefault();var e=$('input[name="email"]').val(),a=$('input[name="password"]').val();return"example@email.com"==e&&"pass123"==a?(localStorage.setItem("loggedIn",1),window.location.href="menu.html"):(localStorage.setItem("loggedIn",0),$("#loginerror").addClass("d-block")),!1}),null==localStorage.getItem("userdetails")){console.log(1);var e={firstName:"",lastName:"",dob:"",address1:"",address2:"",address3:""};localStorage.setItem("userdetails",JSON.stringify(e))}else e=JSON.parse(localStorage.getItem("userdetails"));$("#udetails").length>0&&($('input[name="firstname"]').val(e.firstName),$('input[name="lastname"]').val(e.lastName),$('input[name="dob"]').val(e.dob),$('input[name="address1"]').val(e.address1),$('input[name="address2"]').val(e.address2),$('input[name="address3"]').val(e.address3),$('input[name="cardname"]').val(e.cardName),$('input[name="cardnumber"]').val(e.cardNo),$('input[name="cardcvc"]').val(e.cardCVC)),$('form[name="userdetails"]').submit(function(t){return e.firstName=$('input[name="firstname"]').val(),e.lastName=$('input[name="lastname"]').val(),e.dob=$('input[name="dob"]').val().toString(),e.address1=$('input[name="address1"]').val(),e.address2=$('input[name="address2"]').val(),e.address3=$('input[name="address3"]').val(),e.cardName=$('input[name="cardname"]').val(),e.cardNo=$('input[name="cardnumber"]').val(),e.cardCVC=$('input[name="cardcvc"]').val(),localStorage.setItem("userdetails",JSON.stringify(e)),!1}),$('form[name="paymentdetails"]').submit(function(t){return"1234567890123456"==$('input[name="cardnumber"]').val()?($("#payment-failure").addClass("d-none"),$("#payment-success").removeClass("d-none"),$("#buy-button").addClass("d-none"),$("#checkout").html("0")):$("#payment-failure").removeClass("d-none"),!1})});